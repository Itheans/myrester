
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script>
    function saveSell() {
      let menu = document.getElementById("menu").value;
      let qty = document.getElementById("qty").value;
      let price = document.getElementById("price").value;
      let date = document.getElementById("sell-date").value;

      if (menu === "" || qty === "" || price === "" || date === "") {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
        return;
      }

      let sales = JSON.parse(localStorage.getItem("sales")) || [];
      sales.push({menu: menu, qty: qty, price: price, date: date});
      localStorage.setItem("sales", JSON.stringify(sales));

      document.getElementById("menu").value = "";
      document.getElementById("qty").value = "1";
      document.getElementById("price").value = "";
      document.getElementById("sell-date").valueAsDate = new Date();

      loadSales();
    }

    function loadSales() {
      let sales = JSON.parse(localStorage.getItem("sales")) || [];
      let table = document.getElementById("salesTable");
      table.innerHTML = "";
      sales.forEach((sale, i) => {
        table.innerHTML += `<tr>
          <td>${sale.menu}</td>
          <td>${sale.qty}</td>
          <td>${sale.price}</td>
          <td>${sale.date}</td>
        </tr>`;
      });
    }

    function loadMenusToSelect() {
      const menuSelect = document.getElementById("menu");
      const priceInput = document.getElementById("price");
      const menus = JSON.parse(localStorage.getItem("menus")) || [];

      menuSelect.innerHTML = `<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π --</option>`;
      menus.forEach(m => {
        menuSelect.innerHTML += `<option value="${m.name}" data-price="${m.price}">${m.name}</option>`;
      });

      menuSelect.onchange = function() {
        const selectedOption = this.options[this.selectedIndex];
        const selectedPrice = selectedOption.getAttribute("data-price");
        priceInput.value = selectedPrice || "";
      };
    }

    window.onload = function() {
      document.getElementById("sell-date").valueAsDate = new Date();
      loadMenusToSelect();
      loadSales();
    }
  </script>
</head>
<body>
<div class="container py-4">
  <h4 class="mb-4">üí∏ ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡∏≤‡∏¢ (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡πÑ‡∏î‡πâ)</h4>

  <form onsubmit="event.preventDefault(); saveSell();">
    <div class="mb-3">
      <label class="form-label">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</label>
      <input type="date" class="form-control" id="sell-date">
    </div>
    <div class="mb-3">
      <label class="form-label">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label>
      <select class="form-control" id="menu"></select>
    </div>
    <div class="mb-3">
      <label class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</label>
      <input type="number" class="form-control" id="qty" value="1">
    </div>
    <div class="mb-3">
      <label class="form-label">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
      <input type="number" class="form-control" id="price">
    </div>
    <button type="submit" class="btn btn-primary w-100">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</button>
  </form>

  <hr class="my-4">
  <h5>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≤‡∏¢</h5>
  <table class="table table-bordered">
    <thead>
      <tr><th>‡πÄ‡∏°‡∏ô‡∏π</th><th>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th><th>‡∏£‡∏≤‡∏Ñ‡∏≤</th><th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th></tr>
    </thead>
    <tbody id="salesTable"></tbody>
  </table>

  <a href="index.html" class="btn btn-secondary mt-3 w-100">üîô ‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏´‡∏•‡∏±‡∏Å</a>
</div>
</body>
</html>
